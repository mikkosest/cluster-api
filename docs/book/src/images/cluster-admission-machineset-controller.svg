<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="841px" preserveAspectRatio="none" style="width:395px;height:841px;" version="1.1" viewBox="0 0 395 841" width="395px" zoomAndPan="magnify"><defs><filter height="300%" id="frrl076pxvxza" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="188.5" cy="20" fill="#000000" filter="url(#frrl076pxvxza)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#frrl076pxvxza)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="110" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="120" y="71.1387">MachineSet controller</text><rect fill="#FEFECE" filter="url(#frrl076pxvxza)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="325" x="26" y="147.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="305" x="36" y="169.1074">MachineSet controller enqueues a Reconcile call</text><rect fill="#FEFECE" filter="url(#frrl076pxvxza)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="238" x="69.5" y="201.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="218" x="79.5" y="223.0762">List machines specified by selector</text><rect fill="#ADD8E6" filter="url(#frrl076pxvxza)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="131.5" y="348.3086"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="141.5" y="369.4473">Adopt machine</text><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="115,299.9063,262,299.9063,274,311.9063,262,323.9063,115,323.9063,103,311.9063,115,299.9063" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="192.5" y="334.1167">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="115" y="315.7144">Machine has no controller</text><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="188.5,402.2773,200.5,414.2773,188.5,426.2773,176.5,414.2773,188.5,402.2773" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="188.5,255.9063,200.5,267.9063,188.5,279.9063,176.5,267.9063,188.5,255.9063" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="145,446.2773,232,446.2773,244,458.2773,232,470.2773,145,470.2773,133,458.2773,145,446.2773" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="145" y="462.0854">More machines</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="244" y="455.6831">yes</text><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="32,490.2773,146,490.2773,158,502.2773,146,514.2773,32,514.2773,20,502.2773,32,490.2773" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="93" y="524.4878">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="32" y="506.0854">Not enough replicas</text><rect fill="#ADD8E6" filter="url(#frrl076pxvxza)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="21.5" y="545.9878"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="115" x="31.5" y="567.1265">Boot new machine</text><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="190,490.2773,295,490.2773,307,502.2773,295,514.2773,190,514.2773,178,502.2773,190,490.2773" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="246.5" y="524.4878">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="190" y="506.0854">Too many replicas</text><rect fill="#ADD8E6" filter="url(#frrl076pxvxza)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="180" y="545.9878"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="190" y="567.1265">Delete machines</text><rect fill="#FFC0CB" filter="url(#frrl076pxvxza)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="127.5" y="668.3589"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="137.5" y="689.4976">Return Requeue</text><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="111.5,619.9565,265.5,619.9565,277.5,631.9565,265.5,643.9565,111.5,643.9565,99.5,631.9565,111.5,619.9565" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="192.5" y="654.167">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="111.5" y="635.7646">Not all machines are ready</text><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="188.5,722.3276,200.5,734.3276,188.5,746.3276,176.5,734.3276,188.5,722.3276" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="188.5,103.9688,200.5,115.9688,188.5,127.9688,176.5,115.9688,188.5,103.9688" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#frrl076pxvxza)" points="116.5,766.3276,260.5,766.3276,272.5,778.3276,260.5,790.3276,116.5,790.3276,104.5,778.3276,116.5,766.3276" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="116.5" y="782.1357">Create returned Requeue</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="272.5" y="775.7334">yes</text><ellipse cx="188.5" cy="820.3276" fill="none" filter="url(#frrl076pxvxza)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="189" cy="820.8276" fill="#000000" filter="url(#frrl076pxvxza)" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="30" y2="50"/><polygon fill="#A80036" points="184.5,40,188.5,50,192.5,40,188.5,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="181.9375" y2="201.9375"/><polygon fill="#A80036" points="184.5,191.9375,188.5,201.9375,192.5,191.9375,188.5,195.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="323.9063" y2="348.3086"/><polygon fill="#A80036" points="184.5,338.3086,188.5,348.3086,192.5,338.3086,188.5,342.3086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="274" x2="286" y1="311.9063" y2="311.9063"/><polygon fill="#A80036" points="282,355.293,286,365.293,290,355.293,286,359.293" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="286" x2="286" y1="311.9063" y2="414.2773"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="286" x2="200.5" y1="414.2773" y2="414.2773"/><polygon fill="#A80036" points="210.5,410.2773,200.5,414.2773,210.5,418.2773,206.5,414.2773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="382.2773" y2="402.2773"/><polygon fill="#A80036" points="184.5,392.2773,188.5,402.2773,192.5,392.2773,188.5,396.2773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="279.9063" y2="299.9063"/><polygon fill="#A80036" points="184.5,289.9063,188.5,299.9063,192.5,289.9063,188.5,293.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="244" x2="298" y1="458.2773" y2="458.2773"/><polygon fill="#A80036" points="294,375.293,298,365.293,302,375.293,298,371.293" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="298" x2="298" y1="267.9063" y2="458.2773"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="298" x2="200.5" y1="267.9063" y2="267.9063"/><polygon fill="#A80036" points="210.5,263.9063,200.5,267.9063,210.5,271.9063,206.5,267.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="426.2773" y2="446.2773"/><polygon fill="#A80036" points="184.5,436.2773,188.5,446.2773,192.5,436.2773,188.5,440.2773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="235.9063" y2="255.9063"/><polygon fill="#A80036" points="184.5,245.9063,188.5,255.9063,192.5,245.9063,188.5,249.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="89" x2="89" y1="514.2773" y2="545.9878"/><polygon fill="#A80036" points="85,535.9878,89,545.9878,93,535.9878,89,539.9878" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="89" x2="89" y1="579.9565" y2="599.9565"/><polygon fill="#A80036" points="85,589.9565,89,599.9565,93,589.9565,89,593.9565" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="242.5" x2="242.5" y1="514.2773" y2="545.9878"/><polygon fill="#A80036" points="238.5,535.9878,242.5,545.9878,246.5,535.9878,242.5,539.9878" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="242.5" x2="242.5" y1="579.9565" y2="599.9565"/><polygon fill="#A80036" points="238.5,589.9565,242.5,599.9565,246.5,589.9565,242.5,593.9565" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="178" y1="502.2773" y2="502.2773"/><polygon fill="#A80036" points="168,498.2773,178,502.2773,168,506.2773,172,502.2773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="470.2773" y2="475.2773"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="89" y1="475.2773" y2="475.2773"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="89" x2="89" y1="475.2773" y2="490.2773"/><polygon fill="#A80036" points="85,480.2773,89,490.2773,93,480.2773,89,484.2773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="307" x2="342" y1="502.2773" y2="502.2773"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="342" x2="342" y1="502.2773" y2="599.9565"/><polygon fill="#A80036" points="338,589.9565,342,599.9565,346,589.9565,342,593.9565" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="89" x2="342" y1="599.9565" y2="599.9565"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="643.9565" y2="668.3589"/><polygon fill="#A80036" points="184.5,658.3589,188.5,668.3589,192.5,658.3589,188.5,662.3589" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="277.5" x2="289.5" y1="631.9565" y2="631.9565"/><polygon fill="#A80036" points="285.5,675.3433,289.5,685.3433,293.5,675.3433,289.5,679.3433" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="289.5" x2="289.5" y1="631.9565" y2="734.3276"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="289.5" x2="200.5" y1="734.3276" y2="734.3276"/><polygon fill="#A80036" points="210.5,730.3276,200.5,734.3276,210.5,738.3276,206.5,734.3276" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="702.3276" y2="722.3276"/><polygon fill="#A80036" points="184.5,712.3276,188.5,722.3276,192.5,712.3276,188.5,716.3276" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="599.9565" y2="619.9565"/><polygon fill="#A80036" points="184.5,609.9565,188.5,619.9565,192.5,609.9565,188.5,613.9565" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="127.9688" y2="147.9688"/><polygon fill="#A80036" points="184.5,137.9688,188.5,147.9688,192.5,137.9688,188.5,141.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="272.5" x2="369" y1="778.3276" y2="778.3276"/><polygon fill="#A80036" points="365,469.6953,369,459.6953,373,469.6953,369,465.6953" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="369" x2="369" y1="115.9688" y2="778.3276"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="369" x2="200.5" y1="115.9688" y2="115.9688"/><polygon fill="#A80036" points="210.5,111.9688,200.5,115.9688,210.5,119.9688,206.5,115.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="746.3276" y2="766.3276"/><polygon fill="#A80036" points="184.5,756.3276,188.5,766.3276,192.5,756.3276,188.5,760.3276" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="83.9688" y2="103.9688"/><polygon fill="#A80036" points="184.5,93.9688,188.5,103.9688,192.5,93.9688,188.5,97.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.5" x2="188.5" y1="790.3276" y2="810.3276"/><polygon fill="#A80036" points="184.5,800.3276,188.5,810.3276,192.5,800.3276,188.5,804.3276" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml cluster-admission-machineset-controller

start;
:MachineSet controller;

repeat
  :MachineSet controller enqueues a Reconcile call;
  :List machines specified by selector;
  repeat
    if (Machine has no controller) then (yes)
      #LightBlue:Adopt machine;
    endif
  repeat while (More machines) is (yes)
  if (Not enough replicas) then (yes)
    #LightBlue:Boot new machine;
  elseif (Too many replicas) then (yes)
    #LightBlue:Delete machines;
  endif
  if (Not all machines are ready) then (yes)
    #Pink:Return Requeue;
  endif
repeat while (Create returned Requeue) is (yes)
stop;

@enduml

PlantUML version 1.2017.15(Mon Jul 03 12:45:34 EDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+11-post-Ubuntu-1ubuntu218.04.3
Operating System: Linux
OS Version: 5.1.14-050114-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>